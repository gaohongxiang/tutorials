系列文章参考内容

极客时间上王争老师的《数据结构与算法之美》
程杰老师《大话数据结构》
Aditya Bhargava 《算法图解》

## 禅定

`Programs(程序) = Algorithms(算法) + DataStructures(数据结构)`

`Algorithms(算法) = Logic(业务逻辑) + Control(控制逻辑)`

>首先理解需求，从具体问题中`抽象出适当的数据结构`（一种数学模型），然后`设计或选择解此数据结构的算法`，接着`编写程序`并进行调试、测试，直至得到最终的解答。

## 数据结构与数据类型

### 数据

谈到数据结构与数据类型，那么其核心都是数据，计算机本身就是处理数据的。

`数据是描述客观事物的符号，是计算机中可以操作的对象，是能输入给计算机并被计算机识别和处理的符号集合。`

早期的计算机只用来处理数值类型的数据。而现代计算机还需要处理字符、声音、图像、视频等非数值类型的数据。

### 数据结构

`数据结构是计算机存储、组织数据的方式。是指相互之间存在一种或多种特定关系的数据元素的集合`，包括逻辑结构和物理结构。

如果说一幅画是点的有机组合，几何图形反映出点之间常用的具体的关系，那么，在计算机科学中，数据就等同于点，数据结构就是数据中常用的具体关系。

数据结构的出现和计算机本身工作的方式有关，今天演化出来的很多数据结构，甚至和图灵机的原理，以及计算机底层的冯诺伊曼结构也有关。比如链表这种数据结构，就和图灵机的设计直接相关。

#### 逻辑结构和物理结构

逻辑结构是指数据对象中的数据元素之间的相互关系。又分为`集合结构`（数据元素同属于一个集合，地位平等）、`线性结构`（数据元素之间是一对一的关系）、`树形结构`（数据元素之间是一对多的层次关系）、`图形结构`（数据元素之间是多对多的关系）。

物理结构是指数据的逻辑结构在计算机中的存储形式。数据的存储结构应正确的反应数据元素之间的逻辑关系。数据元素的存储结构分为两种：`顺序存储`（把数据元素存放在地址连续的存储单元里，其数据间的逻辑关系和物理关系是一致的）和 `链式存储`（把数据元素存放在任意的存储单元里，这组存储单元可以是连续的也可以是不连续的。数据元素的存储关系不能反映其逻辑关系，需要用一个指针存放数据元素的地址，通过地址找到相关联数据元素的位置）。

![数据结构](http://phpjkik3o.bkt.clouddn.com/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84.jpg)

### 数据类型

数据类型：是指一组性质相同的值的集合和定义在此集合上的一组操作的总称。用来说明变量或表达式的取值范围和所能进行的操作。

常见的数据类型有：整型（int、int16、int32、int64、uint、...）、浮点型（float、double、...）、字符串型（string）、数组型（array）、字典型（map）等等

### 两者联系与区别

数据结构和数据类型，顾名思义，都跟数据相关。是对数据的不同维度的定义。

类比塑料乐高积木，乐高积木有很多基本的形状，比如圆形、长方形、正方形、菱形等等，而圆形又可以有半径大点的圆形、半径小点的圆形。这些基本的形状就相当于数据类型。这些基本形状是对塑料的不同得塑造，数据类型是对内存的不同布局和分配（对应的内存存储对应的类型的数据）。有了形状就有了用途（比如汽车轮子就得用圆形），换个维度，也就有了限制（比如汽车轮子就不能用长方形）。数据类型同理，比如一个int类型的变量，那么就限定了它是一个范围有限的整数，你可以对它做运算，但是系统会阻止你把它当作函数调用，这可以阻止潜在的错误发生。但同时也带来了工程上的复杂度。比如相同功能的代码，因为类型的不同，需要写针对具体类型的版本，代码冗余也不灵活。所以，这就需要泛型或其他的技术来解决这个问题。

而这些基本的形状可以组合成飞机、大炮、轮船、汽车等等的东西。飞机、大炮、轮船、汽车就相当于是不同的数据结构，是基本图形之间的特定组合关系。

## 常见数据结构

### 1、线形数据结构

典型的有：`线性表`、`数组`、`链表`、`栈`、`队列`

数组是线性表的顺序存储结构的实现。链表是线性表的链式存储结构的实现。

栈和队列是操作受限的线性表。

栈、队列都是操作受限的线性表

#### 数组

数组（Array）是一种`线性表数据结构`。它用`一组连续的内存空间`，来存储`一组具有相同类型`的数据，即`数组是同类数据元素的集合`。

`数组的优势在于随机访问（读取）`：计算机通过地址来访问内存中的数据，由于知道每个数组元素的地址（根据首地址和下标，通过寻址公式就能直接计算出对应的内存地址），所以`数组支持随机访问`，根据下标随机访问的时间复杂度为 O(1)。

`数组的弱势在于插入和删除`：因为数组需要保持内存数据的连续性，插入和删除就需要移动很多元素，非常低效。平均时间复杂度为O(n)。

类比现实中的占位问题：假设你跟一个同学去自习室学习，找了一个地方坐下，过了一会又有一个同学过来，而这时你们旁边没有空位了，而你们三个又想坐在一起，这时候肯定就需要再重新找一个有连续的三个空位的地方。

数组的另一个弱势是大小固定。一经声明就要占用整块连续内存空间。如果声明的数组过大，系统可能没有足够的连续内存空间分配给它，导致内存不足（out of memory）。如果声明的数组过小，则可能出现不够用的情况。这时只能再申请一个更大的内存空间，把原数组拷贝进去，非常费时。为了使用方便，很多编程语言不仅有数组这种基本数据结构，还有基于数组并支持动态扩容的数据结构，比如go语言的数组切片（slice）、java语言的ArrayList 容器。这些数据结构在扩容时依然是重新申请内存空间，依然耗时，只是使用方便。而链表这种数据结构是天然的支持动态扩容。


#### 链表

`链表是一种物理存储单元上非连续、非顺序的存储结构，由一系列节点（链表中每一个元素称为节点）组成，链表中的元素可存储在内存的任何地方`。每个节点括两个部分：`一个是存储数据元素的数据域`，`另一个是存储下一个节点地址的指针域`。数据元素的逻辑顺序是通过链表中的指针链接次序实现的。

链表结构可以想象成一个寻宝游戏：你前往第一个地址，那里有一些宝藏，还有一张纸条写着下一个宝藏地址是123，于是，你前往地址123，那里又有一些宝藏和一张纸条写着下一个地址是456，以此类推。

`链表优势在于插入、删除`：只需要改动存储的相应元素的地址即可。时间复杂度为 O(1)。

`链表弱势在于读取`：必须按照地址依次读取，才能找到想要的元素。如果是读取最后一个元素，那么就需要一个一个往前找，直到把整个链表元素都读取一遍，相当低效。平均时间复杂度为O(n)。

##### 链表分类

链表可以分为单链表、循环链表、双向链表、双向循环链表

单链表：只有一个方向，结点只有一个后继指针 next 指向后面的结点。头结点用来记录链表的基地址，从而可以遍历得到整条链表。尾结点指向一个空地址 NULL，表示这是链表上最后一个结点。

循环链表：是一种特殊的单链表。它跟单链表唯一的区别是它的尾节点指向链表的头节点，而不是空地址NULL。

双向链表：支持两个方向，每个结点不止有一个后继指针 next 指向后面的结点，还有一个前驱指针 prev 指向前面的结点。

双向循环链表：循环链表+双向链表。

![链表](http://phpjkik3o.bkt.clouddn.com/%E9%93%BE%E8%A1%A8.png)

##### 链表代码书写技巧

1、理解指针的含义
```
将某个变量（对象）赋值给指针（引用），实际上就是就是将这个变量（对象）的地址赋值给指针（引用）。
```
2、警惕指针丢失或内存泄漏
```
在节点a和节点b之间插入节点x，b是a的下一节点，p指针指向节点a
p—>next = x;x—>next = p—>next; //这会导致x节点的后继指针指向自身。导致指针丢失和内存泄漏
正确的写法是2句代码交换顺序
x—>next = p—>next; p—>next = x;
```
3、利用哨兵简化实现难度
```
链表中的“哨兵”节点是解决边界问题的，不参与业务逻辑（不存储数据）。
针对链表的插入、删除操作，需要对插入第一个节点和删除最后一个节点的情况进行特殊处理。
如果我们引入“哨兵”节点，则不管链表是否为空，head指针都会指向这个“哨兵”节点。我们把这种有“哨兵”节点的链表称为带头链表，相反，没有“哨兵”节点的链表就称为不带头链表。
```
4、重难留意边界条件处理
```
如果链表为空时，代码能不能正常工作
如果链表只包含一个节点时，代码能不能正常工作
如果链表只包含两个节点时，代码能不能正常工作
代码逻辑在处理头节点和尾节点时，能不能正常工作
```
5、举例和画图，辅助思考

##### 常见的链表操作

1.单链表反转
2.链表中环的检测
3.两个有序链表合并
4.删除链表倒数第n个节点
5.求链表的中间节点

#### 栈

栈（stack）又名堆栈，它是一种操作受限的线性表。最大的特点是先进后出（FILO），`仅允许在表的一端进行插入和删除操作`。可以想象成是弹夹，一端是封闭的一端是开放的，先压进去的子弹最后一个才能射出来，最后压进去的子弹第一个射出来。第一个压进去的子弹称为`栈底元素`，最后一个压进去的子弹称为`栈顶元素`。

栈只有压入（插入）和弹出（读取并删除）两种操作。

栈既可以用数组来实现，也可以用链表来实现。用数组实现的栈，叫作顺序栈（顺序存储结构），用链表实现的栈，叫作链式栈（物理存储结构）。

##### 栈的经典使用场景

1、浏览器的前进后退功能

使用两个栈 X 和 Y，把首次浏览的页面依次压入栈X，当点击后退按钮时，再依次从栈 X 中出栈，并将出栈的数据依次放入栈 Y。当点击前进按钮时，依次从栈 Y 中取出数据，放入栈 X 中。当栈 X 中没有数据时，那就说明没有页面可以继续后退浏览了。当栈 Y 中没有数据，那就说明没有页面可以点击前进按钮浏览了。

2、函数调用栈

操作系统给每个线程分配了一块独立的内存空间，这块内存被组织成“栈”这种结构, 用来存储函数调用时的临时变量。每进入一个函数，就会将临时变量作为一个栈帧入栈，当被调用函数执行完成，返回之后，将这个函数对应的栈帧出栈。

3、编译器利用栈实现表达式求值

加减乘除四则运算

编译器就是通过两个栈来实现的。其中一个保存操作数的栈，另一个是保存运算符的栈。我们从左向右遍历表达式，当遇到数字，我们就直接压入操作数栈；当遇到运算符，就与运算符栈的栈顶元素进行比较。如果比运算符栈顶元素的优先级高，就将当前运算符压入栈；如果比运算符栈顶元素的优先级低或者相同，从运算符栈中取栈顶运算符，从操作数栈的栈顶取 2 个操作数，然后进行计算，再把计算完的结果压入操作数栈，继续比较。

4、判断字符串的括号的合法性

括号成对出现才算合法，比如()、[]、{}、([])、[{}]以及各种组合。

我们用栈来保存未匹配的左括号，从左到右依次扫描字符串。当扫描到左括号时，则将其压入栈中；当扫描到右括号时，从栈顶取出一个左括号。如果能够匹配比如“(”跟“)”匹配，“[”跟“]”匹配，“{”跟“}”匹配，则继续扫描剩下的字符串。如果扫描的过程中，遇到不能配对的右括号，或者栈中没有数据，则说明为非法格式。

#### 队列

队列也是一种操作受限制的线性表。最大的特点是先进先出（FIFO），仅`允许在表的前端（front）进行删除操作，而在表的后端（rear）进行插入操作`。进行插入操作的端称为`队尾`，进行删除操作的端称为`队头`。

队列跟栈一样，既可以用数组来实现，也可以用链表来实现。用数组实现的队列叫作顺序队列，用链表实现的队列叫作链式队列。

在数组实现队列的时候，会有数据搬移操作，要想解决数据搬移的问题，我们就需要像环一样的循环队列。循环队列关键要确定好队空和队满的判定条件。
```
队空判断条件	head == tail
队满判断条件	(tail+1)%n=head
//head为头指针，tail为尾指针
```

##### 特殊特性的队列

一般情况下，不会直接使用队列，而是广泛使用具有特殊特性的队列，如阻塞队列、并发队列。

阻塞队列其实就是在队列基础上增加了阻塞操作。简单来说，就是在队列为空的时候，从队头取数据会被阻塞。因为此时还没有数据可取，直到队列中有了数据才能返回；如果队列已经满了，那么插入数据的操作就会被阻塞，直到队列中有空闲位置后再插入数据，然后再返回。利用阻塞队列可以轻松实现一个`生产者 - 消费者模型`！

并发队列是指线程安全的队列。基于数组的循环队列，利用 CAS 原子操作，可以实现非常高效的并发队列

实际上，对于大部分资源有限的场景，当没有空闲资源时，基本上都可以通过“队列”这种数据结构来实现请求排队。


### 2、树形数据结构

结点间具有层次关系，每一层的一个结点能且只能和上一层的一个结点相关，但同时可以和下一层的多个结点相关，称为“一对多”关系

常见类型有：`树`、`堆`

锦标赛排序法

### 3、图形数据结构

在图形结构中，允许多个结点之间相关，称为“多对多”关系，可分为`有向图`和`无向图`