一道隐形的墙

众所周知，天朝局域网通过 GFW（Great Wall of China） 隔离了我们与外界的交流，当然，这个隔离并非完全隔离，而是选择性的，天朝不希望你上的网站就直接阻断。`每一个网络请求都是有数据特征的，不同的协议具备不同的特征`，比如 HTTP/HTTPS 这类请求，会很明确地告诉 GFW 它们要请求哪个域名；再比如 TCP 请求，它只会告诉 GFW 它们要请求哪个 IP。

GFW 封锁包含多种方式，最容易操作也是最基础的方式便是域名黑白名单，在黑名单内的域名不让通过，IP 黑白名单也是这个道理。

[GFW的拦截原理概析](https://www.svlik.com/1804.html)

翻墙方案

如果你有一台国外服务器不在 GFW 的黑名单内，天朝局域网的机器就可以跟这一台机器通讯。
那么，翻墙的方案就出来了：`境内设备与境外机器通讯，境内想看什么网页，就告诉境外的机器，让境外机器代理抓取，然后送回来，我们要做的就是` **`保证境内设备与境外设备通讯时不被 GFW 怀疑和窃听。`**

![OSI参考模型](https://s2.loli.net/2022/10/14/fDrUNEOAly85Pds.jpg)
[一文看懂网络七层协议/OSI七层模型](https://zhuanlan.zhihu.com/p/296670054)


随着封锁的严重，通往外面世界的路越来越少。从另一角度看，封锁推动了相关技术的发展。目前流行的开源相关技术包括Shadowsocks(SS、酸酸)、ShadowsocksR(SSR、酸酸乳)、V2Ray、trojan、XRay等，直接服务终端用户的VPN和代理产品更是数不胜数。

# 技术路线

目前主流的方案
- 加密
- 混淆
- 伪装成https流量

## 常见代理方式
- http
- https
- socks5

## 隧道
ssh tunnel 是比较具有代表性的防窃听通讯隧道，通过 ssh 与境外服务器建立一条加密通道，此时的通讯 GFW 会将其视作普通的连接。由于大家都这么玩，GFW 着急了，于是它通过各种流量特征分析，渐渐的能够识别哪些连接是 ssh 隧道，并尝试性的对隧道做干扰，结果还是玩不过 GFW，众多隧道纷纷不通。

## VPN
VPN是一种加密的方式，能够保护使用者的IP、位置、个人资讯不外泄，所以VPN可以视作是一种伪装(如果更学术的讲，叫做加密)。经过伪装(加密)后的使用者IP、位置、跟个人资讯，就可以翻墙来访问一些被防火墙屏蔽的网站。目前主流的VPN均为美国公司所开发，然而由于中国政府近年来强力打击加密流量，因此绝大多数的VPN已经无法在中国使用。

## Shadowsocks(R)
`Shadowsocks是一套基于Socks5代理方式的网络加密传输数据包的技术`，将Socks5协议拆开成 Server 端和 Client 端，两个端分别安装在境外服务器和境内设备上。Client 和 Server 之间可以通过多种方式加密，并要求提供密码确保链路的安全性。它发出的 TCP 包，没有明显包特征，GFW 分析不出来，当作普通流量放过了。

想像成有一个中间者可以访问被屏蔽的网站，其访问后再告诉使用者网站资讯。由于中间者并没有受到防火长城的限制，因此可以借此来达到翻墙的目的。

基本原理

```
+------+     +------+     +=====+     +------+     +-------+
| 设备 | <-> |Client| <-> | GFW | <-> |Server| <-> | 服务器 |
+------+     +------+     +=====+     +------+     +-------+
```

ShadowsocksR：是ss一个分支，兼容ss设置，是ss的超集。`带R表示增加了混淆协议，不易被流量监听`

目前SS/SSR开源代码基本不更新了，最新版本基本上满足科学上网的需要。未来随着封锁技术进步，情况未知。

## Trojan

在骗过 GFW 时，与强调加密和混淆的SS/SSR等工具不同，trojan将通信流量伪装成互联网上最常见的https流量，从而有效防止流量被检测和干扰。在敏感时期，基本上只有trojan和 v2ray伪装 能提供稳如狗的体验。

优点
- 轻量级
- 抗干扰能力强

## V2Ray

V2Ray可以当作是进化版的SSR，包含各种不同的混淆跟伪装。

从软件上 V2Ray 不区分服务器版和客户端版，也就是说在服务器和客户端运行的 V2Ray 是同一个软件，区别只是配置文件的不同。

V2Ray有如下大放异彩的特点：

- 开源。V2Ray是Project V的核心工具，源代码开源；
- 多协议支持。代理协议支持：HTTP、SOCKS、Shadowsocks、Trojan、VLESS、VMess、Dokodemo-door、Blackhole、Freedom等；传输协议支持TCP、WebSocket、TLS、mKCP、gRPC、QUIC等。
- 多入口和多出口。V2Ray可同时支持多个入站和出站协议，每个协议独立工作；
- 可定制化路由：入站流量可按配置由不同的出口发出。轻松实现按区域或按域名分流，以达到最优的网络性能。
- 多平台支持。原生支持Windows、Linux、MacOS三大常用平台，安卓、iOS两大移动平台有丰富的第三方工具；
- 反向代理：通用的反向代理支持，可实现内网穿透功能。
- 隐蔽性。V2Ray流量可伪装成网页流量，更难被检测和干扰。

## XRay

- Xray是V2ray的一个分支(Fork)。Xray项目基于V2ray而来，其支持并且兼容V2ray的配置；
- Xray是V2ray的超集。虽然最新版V2ray删除了XTLS，但仍保留VLESS协议。Xray提供完整的VLESS和XTLS支持，目前是V2ray的超集，但后续Xray可能会有会有自己的发展方向；
- 如果使用XTLS，强烈推荐使用Xray，或者安装V2ray-Core 4.29.0 ～ 4.32.1版本；不使用XTLS的情况下，使用V2ray和Xray均可。

## SS(R)、V2Ray、Trojan、XRay比较

- V2Ray是一个框架/平台，功能齐全；Shadowsocks(R)、Trojan都是一个代理工具；
- V2Ray功能强大配置复杂，Shadowsocks(R)、Trojan简单易用；
- V2Ray性能更好，协议支持更完善。
- V2Ray和Trojan都能实现https流量伪装，更难被检测和干扰；Shadowsocks(R)使用加密混淆。敏感时期，基本上只有 V2ray伪装或Trojan能提供十分稳的服务。
- V2Ray、Shadowsocks(R)名气大，使用的人多，客户端很好用；Trojan关注和使用的人少，官方客户端简陋，生态完善度不高。

## XRay

## SS(R)、V2Ray、Trojan、XRay的关系
- [V2Ray是什么，与Shadowsocks/SS/SSR有什么区别？](https://baiyunju.cc/7210)
- [V2Ray、Trojan、XRay（必看）](https://www.chengxiaobai.com/essays/v2ray-trojan-xray)


- V2Ray教程：https://itlanyan.com/v2ray-tutorial/
V2ray多合一脚本，支持VMESS+websocket+TLS+Nginx、VLESS+TCP+XTLS、VLESS+TCP+TLS等组合：https://v2xtls.org/v2ray%e5%a4%9a%e5%90%88%e4%b8%80%e8%84%9a%e6%9c%ac%ef%bc%8c%e6%94%af%e6%8c%81vmesswebsockettlsnginx%e3%80%81vlesstcpxtls%e3%80%81vlesstcptls%e7%ad%89%e7%bb%84%e5%90%88/
- Shadowsocks/SS教程: https://itlanyan.com/on-fuck-gfw-again/
- V2ray官方一键安装脚本（新版）:https://github.com/bannedbook/fanqiang/blob/master/v2ss/V2ray%E5%AE%98%E6%96%B9%E4%B8%80%E9%94%AE%E5%AE%89%E8%A3%85%E8%84%9A%E6%9C%AC.md


- 2022全网最全面最详细的翻牆技术大全-含实作：https://wallzhihu.com/tech/

shadowsocks windows服务器端

- Windows搭建Shadowoscks服务器端介绍：http://www.vjsun.com/225.html
- Windows下三分钟搭建Shadowoscks服务器端：https://www.librehat.com/three-minutes-to-set-up-shadowsocks-server-on-windows/



科学上网在币圈是必备工具。有两条路可以实现这个需求。
1. 直接买服务
2. 自己搭建

## 买服务

由于显而易见的原因，最好不要用国内的服务商，有很大概率跑路或者被请喝茶。推荐欧美老牌服务商。

根据[翻墙、科学上网中国最全指南[含翻墙软件]-2022年10月更新](https://wallzhihu.com/fanqiang/)这篇文章的测试，以下欧美服务商比较安全稳定
- StrongVPN
- ExpressVPN

# 自己搭建

对于有技术基础的同学，建议自行搭建服务器这条路，主要出于以下几点考虑：

- ExpressVPN、StrongVPN等产品并不比自建便宜，速度上也无太多优势
- 许多付费代理常有不可用或跑路的事情发生，相比之下vps厂商跑路更少
- 万一对方服务器记录访问日志，请喝茶一请一个准
- 自建服务器能全方面锻炼你的网络、系统管理、英文等能力

脚本
- [V2ray多合一脚本，支持VMESS+websocket+TLS+Nginx、VLESS+TCP+XTLS、VLESS+TCP+TLS等组合](https://v2xtls.org/v2ray%e5%a4%9a%e5%90%88%e4%b8%80%e8%84%9a%e6%9c%ac%ef%bc%8c%e6%94%af%e6%8c%81vmesswebsockettlsnginx%e3%80%81vlesstcpxtls%e3%80%81vlesstcptls%e7%ad%89%e7%bb%84%e5%90%88/)
- [Xray一键脚本](https://v2xtls.org/xray%e4%b8%80%e9%94%ae%e8%84%9a%e6%9c%ac/)

## 检查

端口、IP、服务器、协议哪不通
ss 无特征容易封端口

扩展阅读：
- [toutyrater版V2Ray教程，非常详细（必看）](https://toutyrater.github.io/prep/start.html)
- [crifan版科学上网相关知识总结，着重介绍ss(必看)](https://crifan.github.io/scientific_network_summary/website/scientific_network_intro/)
- [itlanyan版科学上网教程（必看）](https://itlanyan.com/v2ray-tutorial/)
- [V2Ray文档](https://www.v2fly.org/guide/workflow.html)

问题汇总
- [阿里云国际 HK 轻量新开服务上 SS 立马被阻断端口](https://www.v2ex.com/t/850663)

浏览器插件
- SwitchyOmega

ss ssr 及各种衍生协议 还有 v2ray 裸奔早就能探测到了，就是 zf 懒得管你的问题。现在比价安全的是 v2ray+ws+tls ，443 端口，而且混淆的网站最好是看上去很正常而且流量大的网站，比如资源下载或者网盘数据同步类型的