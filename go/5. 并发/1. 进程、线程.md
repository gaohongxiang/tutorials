## 进程和线程

#### 程序、进程与线程

`程序和进程是相对的概念，是不同状态下的称谓，程序的动态表现就是进程。反之，进程的静态表现就是程序。`

程序平常都安安静静的待在磁盘上。一旦程序被执行起来，它就从磁盘上的二进制文件变成了计算机内存中的数据、寄存器里的值、堆栈中的指令、被打开的文件以及各种设备的状态信息的一个集合。这种计算机里的数据和状态的总和就是进程。进程描述的是程序的执行过程，是运行着的程序。

`进程`是具有一定独立功能的程序、它是系统进行资源分配和调度的一个独立单位，重点在系统调度和单独的单位，也就是说进程是可以独立运行的一段程序。

程序就像手机里的一个个的APP，如：微信、爱奇艺。当打开微信运行起来后，它就是一个进程了。同时运行微信、爱奇艺就是多个进程。

操作系统本身提供了进程和线程两种并发执行程序的工具。

`线程`是进程的一个实体，是CPU调度和分派的基本单位，他是比进程更小的能独立运行的基本单位，线程自己基本上不拥有系统资源。如：爱奇艺同时打开两个视频，就是两个线程。

##### 进程与线程的关系与区别

- 一个线程只能属于一个进程，而一个进程可以有多个线程，但至少有一个线程（通常说的主线程）。
- 线程在执行过程中，需要协作同步。不同进程的线程间要利用消息通信的办法实现同步。
- 处理机分给线程，即真正在处理机上运行的是线程。
- 线程是指进程内的一个执行单元，也是进程内的可调度实体。
- `调度`：线程作为调度和分配的基本单位，进程作为拥有资源的基本单位。
- `并发性`：不仅进程之间可以并发执行，同一个进程的多个线程之间也可以并发执行。
- `拥有资源`：进程是拥有资源的一个独立单位，线程不拥有系统资源，同一进程的所有线程共享该进程的所有资源。


#### 多进程与多线程

`多进程`：同时执行多个程序。如：同时运行爱奇艺、微信以及谷歌浏览器。

`多线程`：同一时刻执行多个线程。如：用谷歌浏览器一边下载，一边看网页，一边听歌。

#### 主线程、系统级线程与用户级线程

`主线程`：一个进程至少包含一个线程。这个线程被称为此进程的主线程。主线程随着进程的启动而被创建。

`系统级线程`:由操作系统内核创建和撤销。内核维护进程及线程的上下文信息以及线程切换。

`用户级线程`：不需要操作系统内核支持而在用户程序中实现的线程。除了主线程外，其他的线程都是由已存在的线程创建出来的。这种线程叫做用户级线程。即用户级线程都只能由代码显式得创建和销毁。

`如果一个进程只包含一个线程，那么它里面的所有代码只会被串行的执行。如果一个进程包含多个线程，那么其中的代码可以被并发的执行。`

用户级线程的优势是创建销毁速度快（因为不用通过操作系统去做）、容易控制且灵活（不用等着操作系统去调度）。劣势是复杂，全权负责与用户级线程相关的所有具体实现，且必须与操作系统正确的对接。

#### 并发与并行

`并发（concurrency）`：把任务在不同的时间点交给同一个处理器（一个CPU）进行处理。在同一时间点，任务并不会同时运行。

`并行（parallelism）`：把每一个任务分配给每一个处理器（多个CPU）独立完成。在同一时间点，任务一定是同时运行。