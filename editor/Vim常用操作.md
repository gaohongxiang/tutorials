[为何 Emacs 和 Vim 被称为两大神器](https://blog.csdn.net/cruise_h/article/details/17307657)

[vi 和 vim](https://broqiang.com/tutorials/linux-basic-tutorial/38/vi-and-vim)

[vim-adventures(Vim游戏）](https://vim-adventures.com/)
[vim-adventures游戏攻略](http://www.cnblogs.com/dreamstar/p/3581421.html)

Vim是从vi发展出来的一个文本编辑器。代码补完、编译及错误跳转等方便编程的功能特别丰富，在程序员中被广泛使用。

vim 共分为四种模式，分别是`普通模式`，`编辑模式`，`命令模式`，`可视模式`。

# 一、普通模式

普通模式是Vim启动后的默认模式。而不是其他编辑器默认的插入模式。

>其他模式切换到另一个其他模式只能先切换到普通模式，再由普通模式切换到其他模式。其他模式进入普通模式按`ESC键`即可。后文不再说明。

Vim强大的编辑能力来自于其普通模式命令。

## 移动光标

#### 移动一个字符

`h` 或 `向左箭头键(←)` 光标向左移动一个字符

`j` 或 `向下箭头键(↓)` 光标向下移动一个字符

`k` 或 `向上箭头键(↑)` 光标向上移动一个字符

`l` 或 `向右箭头键(→)` 光标向右移动一个字符

#### 横向移动n个字符

`nh` 或 `n←` 光标向左移动n个字符

`nl`或 `n→` 光标向右移动n个字符

`n+空格`按下数字后再按空格键，光标会向右移动这一行的 n 个字符

`0 或功能键Home` 这是数字『 0 』：移动到这一行的最前面字符处

`$ 或功能键End` 移动到这一行的最后面字符处

#### 纵向移动n行

`nj` 或 `n↓` 光标向下移动n个字符

`nk`或 `n↑` 光标向上移动n个字符

`G` 移动到这个档案的最后一行。

`gg 或 1G`移动到这个档案的第一行。

`nG` n 为数字。移动到这个档案的第 n 行。

`H、M、L` 光标移动到这个屏幕的最上方|中央|最下方那一行的第一个字符


## 翻页

`Ctrl + f` 屏幕『向下』移动一页，相当于 Page Down按键

`Ctrl + b` 屏幕『向上』移动一页，相当于 Page Up 按键

`Ctrl + d` 屏幕『向下』移动半页

`Ctrl + u` 屏幕『向上』移动半页

`+` 光标移动到非空格符的下一行

`-` 光标移动到非空格符的上一行

## 复制

#### 复制n个字符

`y0` 复制光标所在的那个字符到该行行首的所有数据

`y$` 复制光标所在的那个字符到该行行尾的所有数据

#### 复制一行

`yy` 复制游标所在的那一行

#### 复制n行

`nyy` n 为数字。复制光标所在的向下 n 行，例如 20yy 则是复制 20 行

如果要复制全部内容，只要n大于内容的行数就可以了。比如内容有100行，101yy即是全部复制了。

`y1G` 复制游标所在行到第一行的所有数据

`yG` 复制游标所在行到最后一行的所有数据


## 粘贴

`p` 为将已复制的数据粘贴在光标下一行

`P` 则为贴在游标上一行！

举例来说，我目前光标在第 20 行，且已经复制了 10 行数据。则按下 p 后，
那 10 行数据会贴在原本的 20 行之后，亦即由 21 行开始贴。
但如果是按下 P 呢？ 那么原本的第 20 行会被推到变成 30 行。

## 删除

#### 删除一个字符

`x` 为向后删除一个字符 (相当于 del 按键)

`X` 为向前删除一个字符(相当于 backspace 亦即是退格键)

#### 删除n个字符

`nx`连续向后删除 n 个字符。例：`10x` 向后删除 10 个字符

`nX`连续向后删除 n 个字符。例：`10X` 向前删除 10 个字符

`d$` 删除游标所在处，到该行的最后一个字符

`d0` 那个是数字的 0 ，删除游标所在处，到该行的最前面一个字符

#### 删除一行字符

`dd` 删除游标所在的那一整行

#### 删除n行字符

`ndd` 删除光标所在的向下 n 行，例如 20dd 则是删除 20 行

`dj` 删除当前行和下一行.等价与 2dd

`d1G` 删除光标所在到第一行的所有数据

`dG` 删除光标所在到最后一行的所有数据

## 特殊操作

#### 复原前一个动作

`u`

相当于 word 中的 Ctrl+Z

#### 重做上一个动作

`Ctrl+r` 或 `.`

相当于 word 中的 Ctrl+Y

. 不要怀疑！这就是小数点！意思是重复前一个动作的意思。

#### 全选

`ggVG`

#### J

`J` 将光标所在行与下一行的数据结合成同一行


## 搜索替换

#### /word 和 ?word

`/word` 向光标之下寻找一个名称为 word 的字符串。

`?word` 向光标之上寻找一个字符串名称为 word 的字符串。

例如要在档案内搜寻 BroQiang 这个字符串，就输入 /BroQiang 即可！

#### n 和 N

这个 n 和 N 是英文按键。

`n` 代表重复后一个搜寻的动作。
`N` 代表重复前一个搜寻的动作。

举例来说， 如果刚刚我们执行 /BroQiang 去向下搜寻 BroQiang 这个字符串，则按下 n 后，会向下继续搜寻下一个名称为 BroQiang 的字符串，按下 N 后，会向下继续搜寻上一个名称为 BroQiang 的字符串。

`使用 /word 配合 n 及 N 是非常有帮助的！可以让你重复的找到一些你搜寻的关键词！`

#### :n1,n2s/word1/word2/gc

n1 与 n2 为数字

在第 n1 与 n2 行之间寻找 word1 这个字符串，并将该字符串取代为 word2 ！且在取代前显示提示字符给用户确认 (confirm) 是否需要取代！

>如果`:n1,n2s/word1/word2/g`则直接取代，不提示。

举例来说，在 100 到 200 行之间搜寻 BroQiang 并取代为 Bro 则：
『:100,200s/BroQiang/Bro/g』。

##### 特例：`:1,$s/word1/word2/gc`

从第一行到最后一行寻找 word1 字符串，并将该字符串取代为 word2 ！且在取代前显示提示字符给用户确认 (confirm) 是否需要取代！

# 二、编辑模式

编辑模式就是大家都熟悉的模式。这里不多解释。

#### 普通模式与编辑模式互转

普通模式下按 `i、I、a、A、o、O、r、R` 任意一个键都可以进入编辑模式。

个人比较常用的方式是按`i`（insert／插入）键或者`a`（append／追加）键。

i 为『从目前光标所在处插入』、I 为『在目前所在行的第一个非空格符处开始插入』、a 为『从目前光标所在的下一个字符处开始插入』、A 为『从光标所在行的最后一个字符处开始插入』、o 为『在目前光标所在的下一行处插入新的一行』、O 为在目前光标所在处的上一行插入新的一行、r 只会取代光标所在的那一个字符一次、R 会一直取代光标所在的文字，直到按下 ESC 为止

>特别注意的是，如果想要在档案里面输入字符时，一定要先进入编辑模式才可以。
很多人复制好了内容准备插入档案，结果发现每次都插入不全，那是因为普通模式下编辑器遇到要插入的内容里的 `i、I、a、A、o、O、r、R` 字符时才转为编辑模式开始插入内容，遇到特定字符之前的内容自然就丢失了。

编辑模式下按ESC键就会返回普通模式。

# 三、命令模式

命令模式中可以执行一些输入并执行一些vim或插件提供的指令，就像在shell里一样。这些指令包括设置环境、文件操作、调用某个功能等等。

#### 普通模式进入命令模式

在正常模式中，按下`:`（英文冒号）键，会进入命令模式。

#### 常用命令

`:wq` 将编辑的数据写入硬盘档案中并退出(常用)

`:wq!` 若文件属性为『只读』时，强制写入该档案并退出。
不过，到底能不能写入， 还是跟你对该档案的档案权限有关！

`:q` 退出

`:q!`不保存退出 若曾修改过档案，又不想储存，使用 ! 为强制离开不储存档案。

`:w [filename]` 将编辑的数据储存成另一个档案（类似另存新档）

`:r [filename]` 在编辑的数据中，读入另一个档案的数据。

亦即将 『filename』 这个档案内容加到游标所在行后面

`:n1,n2 w [filename]` 将 n1 到 n2 的内容储存成 filename 这个档案。

`:! command` 暂时离开 vi 到指令行模式下执行 command 的显示结果！

例如:! ls /home 即可在 vi 当中察看 /home 底下以 ls 输出的档案信息！

# 四、可视模式

可视模式中的操作有点像拿鼠标进行操作，选择文本的时候有一种鼠标选择的即视感，有时候会很方便。

#### 普通模式进入可视模式

在正常模式中按下`v、V、<Ctrl>+v`任意一个，可以进入可视模式。

# 五、vim 环境的变量

`:set nu/:set nonu` 显示行号/为取消行号，设定之后，会在每一行的前缀显示该行的行号

`:set tabstop=4` 设置一个tab = 4个空格

`:set expandtab/:set noexpandtab` 设置/取消 将tab自动替换成空格

`:set encoding=utf-8` 设置字符编码，一般默认就是 utf-8

`:syntax on/syntax off` 是否启用语法高亮，默认是启用的

`:set autoindent` 输入自动缩进，即每行的缩进值与上一行相等。

`:set shiftwidth=4` 表示每一级缩进的长度为4个空格。

`:set smartindent` 在这种缩进模式中，每一行都和前一行有相同的缩进量，
同时这种缩进形式能正确的识别出花括号，当遇到右花括号（}），则取消缩进形式。

这只是一些最简单的设置，如果想叫 vim 成为一个强大的 IDE ，还可以又很多配置及插件

上面的命令只能在当前打开文档中生效，如果想要以后每次打开文档都可以生效，
可以将配置写到 ~/.vimrc 中。

下面是一个完成的配置，可以直接写入到 ~/.vimrc 中。（当然这也只是一个最基本的配置）
```
set nu
set tabstop=4
set expandtab
set autoindent
set shiftwidth=4
set smartindent
```

# 六、vim学习资料

[
[讨论]在vim中合理的使用Ctrl+C、Ctrl+X、Ctrl+V操作系统（全局）剪贴板](https://forum.ubuntu.com.cn/viewtopic.php?f=68&t=254241)
[Vim 的粘贴复制功能](https://www.cnblogs.com/didi/p/4067193.html)