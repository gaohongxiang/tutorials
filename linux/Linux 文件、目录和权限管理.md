linux下任何东西都是以文件目录形式来管理的。

## 常规操作

### 增

##### 创建目录`mkdir`

- `mkdir 目录名`
- `mkdir -p 目录1/目录2/目录n`递归创建目录
- `mkdir {目录1,目录2,目录n}`同时创建多个目录（一个级别）
- `mkdir -p 目录1/目录2/{目录3,目录4}`递归创建目录并最后目录下建多个目录

##### 创建文件

- touch 创建一个空白的文件 `touch 文件名`
- vi/vim创建文件并写入内容

##### 复制文件或目录`cp`

- `cp 指定文件 指定目录`复制指定文件到指定目录
- `cp 指定文件 新的文件名`同目录下复制指定文件并重命名
- `cp -r 指定目录 指定目录`复制指定目录到指定目录
- `cp -r 指定目录 新的目录名`同目录下复制指定目录并重命名

>***递归参数小提示：***
一个命令如果先处理父级再处理子级，那么就用`-p`参数，意为parents，如递归创建目录，必须有父级目录才能创建子级目录。
一个命令如果先处理子级再处理父级，那么就要`-r`参数，意为recursive，如递归删除、复制、移动等，都必须先处理最下一级才能向上进行。

### 删

- `rm 文件名`删除文件
- `rm -r 目录名`删除目录（递归删除目录及目录下文件）
- `rm -rf 目录名`强制删除目录（不给提示）

>**`rm -rf / `永远都不要执行**

### 查

#### 查看文件内容

##### cat 
-  `cat 文件名`从头开始显示文件内容

##### head 
- `head -n 5 文件名`显示前五行

##### tail 
- `tail -n 5 文件名`显示后五行
- `tail -f 文件名`当文件内容增长时显示后续添加的数据
 
#### 查看文件或目录的类型

##### stat
- `stat 文件名/目录名`查看文件或目录的类型

#### 查找文件或目录

##### whereis
- 用来查找程序的二进制可执行文件、源码文件、man手册等在系统中的位置。
- `whereis [选项] 文件/目录`

##### which
- 用来查询命令的绝对路径，which指令会在环境变量$PATH设置的目录里查找符合条件的文件。
- `which [选项] 文件/目录`

##### find
- 查找文件或目录
- `find path -option [ -print ] [ -exec -ok command ] {};`
- `find / -name passwd`查找根目录下名字为passwd的文件
- `find /etc -type f`找出etc下的普通文件
- `find /var/log/ -type f -mtime +7`查找/var/logs目录中更改时间在7日以前的普通文件

##### grep 

- 过滤内容
- `grep [选项]... PATTERN [FILE]...`
- `grep root /etc/passwd`查询所有包含 root 的用户信息
- `grep ^root /etc/passwd`查询出所有 root 开头的用户信息
- `grep -v root /etc/passwd`查询出不包含某个字符串的行

#### 查看文件或目录时常用到的命令

##### `pwd`查看当前所在路径

路径分为绝对路径与相对路径

- 绝对路径：Linux 的绝对路径是从 / 开始的路径，如 /etc/passwd
- 相对路径：相对于当前工作目录的路径。
- 命令接文件名的时候灵活运用绝对和相对路径

#####  `ls`查看目录或文件
- `ls [目录名]`目录名可选。加上表示查看指定目录下的目录或文件，不加表示查看当前目录下的目录或文件
- `ls -a [目录名]`查看全部目录或文件包括隐藏文件
- `ls -l [目录名]`列表方式查看目录或文件，别名`ll`
- `ll -a [目录名]`列表方式查看全部目录或文件包括隐藏文件

#####  `cd`（change directory）改变当前所在目录
- `cd 目录名`回到指定目录
- `cd  ..`回到上级目录
- `cd ~`回到当前用户的家目录
- `cd ~root`回到root用户的家目录
- `cd -`直接回到上一次切换之前的目录

>常用目录符号说明
`.`代表当前目录
`..`代表上级目录
`~`（Esc下面的那个符号）代表当前用户所在的家目录
`~test`代表test帐号所在的家目录
`*`代表目录下的所有文件及目录

### 改

`mv`移动/重命名
- `mv 文件/目录 指定目录`将文件或目录移动到指定的目录
- `mv 文件/目录 同路径下文件/目录`同路径下表示将前面文件或目录重命名为后者

>Linux下直接重命名只有mv的方式，cp方式可以把文件或目录复制的同时重命名

## 文件与目录权限

Linux 下的每一个文件及目录都有 拥有者 、 群组 、 其他人 三组权限

### 文件和目录属性

`ll`查看

`-rw-r--r-- 1 root root 32 9月  18 09:32 test.txt`
`drwxrwxr-x. 2 test test  149 4月  22 19:20 script`

![文件及目录属性](http://pcen3n3o2.bkt.clouddn.com/%E6%96%87%E4%BB%B6%E7%9B%AE%E5%BD%95%E5%B1%9E%E6%80%A7.png)

#### 第1组 `-rw-r--r--.`

这一组是由11个字段组成，并且由五部分组成

**第一部分**`-`代表**文件类型**，具体的含义：
- `-` 代表文件
- `d` 代表目录
- `l` 代表链接
- `b` 代表存储设备，如硬盘、U盘等
- `c` 代表设备，比如鼠标、键盘等

**第二部分**	`rw-`表示所属用户**（u）**的权限

分别代表着 读、写、执行的权限，`-`代表着没有对应的权限。

**第三部分** `r--`表示所属群组**（g）**的权限

分别代表着 读、写、执行的权限，`-`代表着没有对应的权限。

**第四部分** `r--`表示其他用户**（o）**的权限（也就是说任何用户都有的权限）

分别代表着 读、写、执行的权限，`-`代表着没有对应的权限。

>说明：`rwx分别代表读、写、执行 ugo分别代表所属用户、所属组、其他用户`

**第五部分** `.`代表拥有 SELinux 安全属性。

这个是 RHEL 专有的，并非所有 Linux 发行版本都会有

上面的权限是针对一般用户，root 帐号并不被这个权限约束，因为root帐号是超级管理员，
比较特殊的一个权限。

**第2组 1** ：到此目录或文件的硬链接数

**第3组 root** ：文件或目录的所属用户

**第4组 root** ：文件或目录的所属群组

**第5组 32** ：文件或目录的大小

**第6组 9月 18 09:32** ：文件或目录的最后更新时间

**第7组 test.txt** ：文件或目录的名称


### 修改文件或目录属性

##### 修改文件所属用户和群组`chown`
- `chown [选项] 所有者:群组名 文件名`
- `chown 新用户名：新群组名 文件/目录`修改指定文件或目录的所属用户和群组
- `chown -R 新用户名：新群组名 文件/目录`递归修改指定目录下所有文件及目录的用户和群组

##### 修改文件权限`chmod`

- `u/g/o` +/- `rwx` 例：chmod -R +x 目录（目录及其下ugo全加x权限）
- `u/g/o` = `rwx`例：chmod u=rwx,g=rx 文件（直接指定ugo权限）
- 数字快速设置`r=4 w=2 x=1`例：chmod 777 目录

>第一种适合于不知道原来权限但要求不动原来文件或目录权限，在其基础上增加或删除某个权限
第二种适合指定用户或群组拥有指定权限
第三种用数字方式指定用户或群组拥有指定权限

### 文件及目录的预设权限

新文件/目录被创建时，都有一个预设的权限，由文件创建掩码决定。
umask命令用来设置限制新建文件权限的掩码，用户每次注册进入系统时，umask命令都被执行， 并自动设置掩码mode来限制新文件/目录的权限。

>`文件/目录的权限=最大权限-umask值`

注：
- 目录默认的最大权限是777（rwxrwxrwx）
- 文件默认是没有执行权限的，最大权限为666（rw-rw-rw-）

##### 查询默认的umask
- `umask`结果：0022（第一个0不用管，从第二个值开始分别代表rwx值）
- `umask -S`结果：u=rwx,g=rx,o=rx

对应的默认权限（最大权限-默认限制权限）
- 目录`rwxr-xr-x`755 
- 文件`rw-r--r--`644 


##### 预设权限设置

>`umask rwx值`如：umask 002

相应的默认权限

- 目录 `rwxrwxr-x`775
- 文件 `rw-rw-r--`664

### 隐藏属性
Linux中的隐藏属性用来更好的控制文件的安全性

##### 查看隐藏属性`lsattr` 
- `lsattr -a`显示所有文件和目录
- `lsattr -d`显示，目录名称，而非其内容
- `lsattr -R`递归处理，将指定目录下的所有文件及子目录一并处理

#####  设置隐藏属性`chattr`
- `chattr +i 文件/目录`为文件/目录添加 i 属性。相应的去处i属性`chattr -i 文件/目录`i 属性：文件不能被修改（包括添加新的内容）、删除、创建链接，并且只有root帐号才可以设置这个属性
- `chattr =a 文件/目录`为文件/目录添加 a 属性。 a 属性：文件只能增加内容，不能删除也不能修改，并且只有root帐号可以设置这个属性，设置后即使文件所有者也不可以修改和删除，可以用作比较重要的日志记录。